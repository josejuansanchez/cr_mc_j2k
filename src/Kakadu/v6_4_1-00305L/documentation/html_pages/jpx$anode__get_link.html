<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (jpx_metanode::get_link) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx$anode__get$reference.html"> prev </A>||<A HREF="jpx$anode__enum_linkers.html"> next </A>|</P>
<H1><A NAME="ToP">jpx_metanode::get_link</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Jpx_metanode.Get_link</EM></H3></DIR></DIR>
<P CLASS="function-text"><A HREF ="jpx$anode.html">jpx_metanode</A> get_link(
<B>jpx_metanode_link_type</B>&nbsp;&amp;&nbsp;link_type)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native Jpx_metanode Get_link(
int[]&nbsp;link_type)</EM></P></DIR></DIR>
<P>[Declared in <A HREF="++++apps+c$essed_io+jpx+h.html">"../apps/compressed_io/jpx.h"</A>]</P><P><A HREF="jpx$anode.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This function provides a convenient (and potentially
expandable) mechanism to identify semantic links between
elements in the metanode hierarchy. At present, any
node satisfying all of the following conditions is
considered to be a link:
</P><UL><LI>
The node must be represented by a cross-reference box.
</LI><LI>
The cross-reference box's fragment list must identify
exactly one contiguous range of bytes from the same
original file.
</LI><LI>
The cross-reference box must point to the box associated
with another node in the metanode hierarchy; for nodes
with descendants, it may point either to the association
box or to the node's immediate box, which is necessarily
the first sub-box of its association box. It is illegal
for cross-reference boxes to point to other cross-reference
boxes, but a link node might effectively reference
another link node if that node has a containing asoc
box.
</LI></UL><P>
 If all the above conditions are satisfied, the function
sets the 
<A HREF="jpx$anode__get_link.html#link_type">link_type</A> argument to one of 
<A HREF="globals.html#JPX_GROUPING_LINK">JPX_GROUPING_LINK</A>, 
<A HREF="globals.html#JPX_ALTERNATE_CHILD_LINK">JPX_ALTERNATE_CHILD_LINK</A> or 
<A HREF="globals.html#JPX_ALTERNATE_PARENT_LINK">JPX_ALTERNATE_PARENT_LINK</A>, the interpretations of which are given below. Otherwise,
the function sets 
<A HREF="jpx$anode__get_link.html#link_type">link_type</A> to 
<A HREF="globals.html#JPX_METANODE_LINK_NONE">JPX_METANODE_LINK_NONE</A> and returns an empty interface.
</P><P>
 It is important to remember that when the ultimate
source of data is a dynamic cache, the function may
initially be unable to resolve a link, in which case
it will set 
<A HREF="jpx$anode__get_link.html#link_type">link_type</A> to 
<A HREF="globals.html#JPX_METANODE_LINK_NONE">JPX_METANODE_LINK_NONE</A> and return an empty interface. It is also possible
that the link is able to be resolved, but its target
node cannot yet be completely read. In this case, the
function sets 
<A HREF="jpx$anode__get_link.html#link_type">link_type</A> to the correct value but still returns an empty interface.
Both of these conditions may be transitory, meaning
that subsequent calls to this function will return
more complete information. If any of these conditions
change, the current node will be added to the list
of touched nodes, from which it can be discovered using
<A HREF="jpx$nager__get$hed_nodes.html">jpx_meta_manager::get_touched_nodes</A>.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
An empty interface if any of the following hold:
</P><UL><LI>
The present node is not a cross-reference; or
</LI><LI>
The present node is a cross-reference which cannot
(at least for the moment) be resolved as a link to
another node in the metadata hierarchy; or
</LI><LI>
The present node is a link to another node in the metadata
hierarchy, but the linked node cannot yet be completely
read &mdash; in this last case, 
<A HREF="jpx$anode__get_link.html#link_type">link_type</A> will be set to the correct link type, as opposed to
<A HREF="globals.html#JPX_METANODE_LINK_NONE">JPX_METANODE_LINK_NONE</A>.
</LI></UL>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="link_type">link_type</A> [<B>jpx_metanode_link_type</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Used to return one of the following link types, providing
additional semantics, which are inferred by Kakadu
based on reasonable assumptions concerning cross-referencing
and the use of asoc boxes:
</P><UL><LI>
<A HREF="globals.html#JPX_METANODE_LINK_NONE">JPX_METANODE_LINK_NONE</A> &mdash; the present node is not a cross-reference
box or else the cross-reference cannot (at least for
the moment) be resolved as a link to another node in
the metadata hierarchy.
</LI><LI>
<A HREF="globals.html#JPX_GROUPING_LINK">JPX_GROUPING_LINK</A> &mdash; if the cross-reference box itself is the first
sub-box of an 
<B>asoc</B> (association) box, Kakadu interprets it as a grouping
link. A grouping link serves to identify the remaining
boxes in the 
<B>asoc</B> box as members of a group associated with the link
target. In the 
<A HREF="jpx$anode.html">jpx_metanode</A> hierarchy, these additional boxes are represented
as the descendants of the link node. If some of these
descendants are themselves grouping links, their descendants
belong to multiple groups. Non-grouping links are necessarily
leaves in the 
<A HREF="jpx$anode.html">jpx_metanode</A> tree hierarchy. Grouping link nodes are particularly
special because they can be the target of other links
&mdash; this is because the only way to arrange for
a cross-reference box to refer to a link node is to
refer to the node's containing 
<B>asoc</B> box (IS15444-2 makes it illegal for cross-references
to point to other cross-reference boxes). If the target
node of a grouping link is represented by the first
sub-box of an 
<B>asoc</B> box, the grouping link points to this first sub-box,
rather than the 
<B>asoc</B> box. Evidently, grouping links may not point to other
link nodes, since that would require the cross-reference
box to reference another cross-reference box (illegal
under IS15444-2). This also means that grouping links
can accidentally cause true cycles to appear in the
metadata structure &mdash; no problem for Kakadu, but
may be a problem for other file parsers which blindly
expand cross-referenced contents.
</LI><LI>
<A HREF="globals.html#JPX_ALTERNATE_CHILD_LINK">JPX_ALTERNATE_CHILD_LINK</A> &mdash; if the link node is a leaf (hence not a grouping
link) and its cross-reference box points to an 
<B>asoc</B> box or to another leaf node (i.e., to any box which
is not the first sub-box of an 
<B>asoc</B> box), the link target is interpreted as an alternate
child of the link node's parent. This interpretation
agrees exactly with what would happen if the file parser
transparently walked into the cross-reference box as
though it were a local sub-box of the 
<B>asoc</B> box currently being parsed. Note that alternate child
links can legally point to other link nodes, so long
as they are grouping links &mdash; because the cross-reference
box in this case points to an asoc box rather than
another cross-reference box.
</LI><LI>
<A HREF="globals.html#JPX_ALTERNATE_PARENT_LINK">JPX_ALTERNATE_PARENT_LINK</A> - if the link node is a leaf (hence not a grouping
link) and its cross-reference box points to the first
sub-box of an 
<B>asoc</B> box, the link target is interpreted as an alternate
parent of the link node's parent. Where alternate parents
exist, they are normally used to form bi-directional
links between two nodes A and B, as follows: A(...Lc&rarr;B...)
and B(...Lp&rarr;A...). Here, A and B are each the
first sub-box of their respective 
<B>asoc</B> boxes and parentheses are used to represent their
descendants (non-initial sub-boxes of the asoc box);
Lc&rarr;B is an alternate child link to node B (its
cross-reference box points to B itself) and Lp&rarr;A
is an alternate parent link to node A (is cross-reference
box points to the 
<B>asoc</B> box headed by A). This arrangement allows A and B
to discover each other with their proper relationships
and should cause no problems for file readers which
are not aware of Kakadu's interpretation. The arrangement
is also very useful in JPIP browsing applications,
since it forces a server to deliver A in any context
where B must be expanded and vice-versa. Evidently,
alternate-parent links may not point to other link
nodes, since that would require the cross-reference
box to reference another cross-reference box (illegal
under IS15444-2).
</LI></UL>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx$anode__get$reference.html"> prev </A>||<A HREF="jpx$anode__enum_linkers.html"> next </A>|</P>
</BODY>
</HTML>
